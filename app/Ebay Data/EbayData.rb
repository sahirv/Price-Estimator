class EbayData

	# This method calls the Ebay Api's and returns their results in an array of hashes
  	def self.GetResultsFromEbay( nameOfProduct, numberOfResults )
	
  	  resultsHashArray = []
	
  	  shoppingApiCall = JSON.parse('{"Timestamp":"2015-12-20T18:07:03.081Z","Ack":"Success","Build":"E949_CORE_APILW_17769283_R1","Version":"949","Item":[{"ItemID":"121814265011","EndTime":"2016-01-12T15:59:25.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-5s-32-64GB-Factory-Unlocked-Verizon-Unlocked-Gray-Gold-Silver-/121814265011?var=","ListingType":"FixedPriceItem","Location":"Ann Arbor, Michigan","PictureURL":["http://i.ebayimg.com/00/s/ODc0WDE2MDA=/z/4ewAAOSwT4lWRgBu/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTYwMFgxNDQw/z/4VoAAOSwT4lWRgBq/$_1.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":249.35,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"P22DT21H52M23S","Title":"Apple iPhone 5s 32/64GB Factory Unlocked-Verizon Unlocked Gray Gold Silver ","ItemSpecifics":{"NameValueList":[{"Name":"Brand","Value":["Apple"]},{"Name":"Model","Value":["iPhone 5s"]},{"Name":"MPN","Value":["Does Not Apply"]},{"Name":"Contract","Value":["Without Contract"]},{"Name":"Operating System","Value":["iOS - Apple"]},{"Name":"Storage Capacity","Value":["32GB"]},{"Name":"Style","Value":["Bar"]},{"Name":"Features","Value":["3G Data Capable","4G Data Capable","Bluetooth Enabled","Fingerprint Sensor","GPS","Internet Browser","Speakerphone","Touchscreen","Wi-Fi Capable"]},{"Name":"Bundled Items","Value":["Adaptor, Cable","Case"]},{"Name":"Lock Status","Value":["Factory Unlocked"]}]},"Country":"US","AutoPay":true,"ConditionID":2500,"ConditionDisplayName":"Seller refurbished"},{"ItemID":"141796250156","EndTime":"2016-01-06T19:35:17.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-5C-32gb-Factory-GSM-Unlocked-Smartphone-C-/141796250156?var=","ListingType":"FixedPriceItem","Location":"New York, New York","PictureURL":["http://i.ebayimg.com/00/s/NzEyWDg2NQ==/z/J2cAAOSw-vlVlYb3/$_1.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":179.99,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"P17DT1H28M15S","Title":"Apple iPhone 5C - 32gb - Factory GSM Unlocked Smartphone (C)","ItemSpecifics":{"NameValueList":[{"Name":"Brand","Value":["Apple"]},{"Name":"Model","Value":["IPHONE 5C "]},{"Name":"MPN","Value":["IPHONE5C"]},{"Name":"Network","Value":["Unlocked "]},{"Name":"Contract","Value":["Without Contract"]},{"Name":"Operating System","Value":["iOS - Apple"]},{"Name":"Storage Capacity","Value":["32GB"]},{"Name":"Style","Value":["Bar"]},{"Name":"Features","Value":["3G Data Capable","4G Data Capable","Bluetooth Enabled","Global Ready","GPS","Internet Browser","Music Player","Speakerphone","Touchscreen","Voice-Activated Dialing","Wi-Fi Capable"]},{"Name":"Carrier","Value":["Unlocked"]}]},"Country":"US","AutoPay":true,"ConditionID":3000,"ConditionDisplayName":"Used","GlobalShipping":true,"ConditionDescription":"This is a Used phone in fair condition. Device comes with signs of normal usage like scuffs or scratches on both the front and the back of the product. Unit will be packaged in an after market box with compatible charger! This phone is compatible with AT&T, T-Mobile, etc.. Will NOT work on any CDMA Carriers (Verizon, Sprint, etc.)"},{"ItemID":"161917197113","EndTime":"2015-12-20T18:10:17.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-4s-16GB-White-Unlocked-Smartphone-Jail-Broke-/161917197113","ListingType":"Chinese","Location":"East Petersburg, Pennsylvania","GalleryURL":"http://thumbs2.ebaystatic.com/pict/1619171971138080_1.jpg","PictureURL":["http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/E1MAAOSwnH1WbbNq/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/os4AAOSwNphWbbOH/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/AUkAAOSw7FRWbbOO/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/GBMAAOSwnH1WbbOV/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/XPQAAOSw8-tWbbOe/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/FA0AAOSwp5JWbbOl/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/DfcAAOSwcOFWbbOt/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/DsIAAOSwcOFWbbO0/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTYwMFgxMDY2/z/HGUAAOSwnH1WbbO8/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/kf8AAOSwfZ1WbbPO/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/IT4AAOSwcOFWbbQ7/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTA2NlgxNjAw/z/D7MAAOSwxN5WbbRA/$_1.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":200.0,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"PT3M15S","Title":"Apple iPhone 4s - 16GB - White (Unlocked) Smartphone Jail Broke","ItemSpecifics":{"NameValueList":[{"Name":"Model","Value":["iPhone 4s"]},{"Name":"Color","Value":["White"]},{"Name":"Cosmetic condition","Value":["Good"]},{"Name":"No accessories","Value":["Yes"]},{"Name":"Brand","Value":["Apple"]},{"Name":"Network","Value":["Unlocked"]},{"Name":"Storage Capacity","Value":["16GB"]},{"Name":"Screen Size","Value":["3.5\""]},{"Name":"Style","Value":["Bar"]},{"Name":"Camera Resolution","Value":["8.0MP"]}]},"Country":"US","AutoPay":false,"ConditionID":3000,"ConditionDisplayName":"Used"},{"ItemID":"272021047715","EndTime":"2016-01-17T15:35:48.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Factory-Unlocked-Apple-iPhone-5-5S-Gold-Silver-Black-White-16-32-AT-T-Tmobile-/272021047715?var=","ListingType":"FixedPriceItem","Location":"New York City","PictureURL":["http://i.ebayimg.com/00/s/ODAwWDc3Nw==/z/oncAAOSw5VFWJY6z/$_1.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":150.35,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"P27DT21H28M46S","Title":"Factory Unlocked Apple iPhone 5 or 5S Gold Silver Black White 16 32 AT&T Tmobile","ItemSpecifics":{"NameValueList":[{"Name":"Brand","Value":["Apple"]},{"Name":"MPN","Value":["Select using the menu"]},{"Name":"Bundled Items","Value":["Adaptor, Cable"]}]},"Country":"US","AutoPay":true,"ConditionID":3000,"ConditionDisplayName":"Used","QuantityAvailableHint":"MoreThan","QuantityThreshold":10,"ConditionDescription":"This phone is professionally tested and cleaned to ensure perfect working functionality."},{"ItemID":"121837232173","BuyItNowAvailable":true,"ConvertedBuyItNowPrice":{"Value":260.0,"CurrencyID":"USD"},"EndTime":"2015-12-20T18:09:32.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-5-32GB-Black-Slate-Verizon-Smartphone-/121837232173","ListingType":"Chinese","Location":"Plano, Texas","GalleryURL":"http://thumbs2.ebaystatic.com/pict/1218372321738080_1.jpg","PictureURL":["http://i.ebayimg.com/00/s/MTIwMFgxNjAw/z/DmsAAOSwf-VWXJBm/$_1.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":200.0,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"PT2M30S","Title":"Apple iPhone 5 - 32GB - Black & Slate (Verizon) Smartphone","ItemSpecifics":{"NameValueList":[{"Name":"Model","Value":["5"]},{"Name":"Color","Value":["Black"]},{"Name":"Cosmetic condition","Value":["Excellent"]},{"Name":"Headphones","Value":["Yes"]},{"Name":"Charger and cable","Value":["Yes"]},{"Name":"Original box","Value":["Yes"]},{"Name":"Brand","Value":["Apple"]},{"Name":"Network","Value":["Verizon"]},{"Name":"Storage Capacity","Value":["32GB"]},{"Name":"Screen Size","Value":["4\""]},{"Name":"Style","Value":["Bar"]},{"Name":"Camera Resolution","Value":["8.0MP"]}]},"Country":"US","AutoPay":false,"ConditionID":3000,"ConditionDisplayName":"Used","GlobalShipping":true},{"ItemID":"331683420379","EndTime":"2016-01-14T16:04:03.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Factory-Unlocked-Apple-iPhone-5-AT-T-T-Mobile-Verizon-Black-White-/331683420379?var=","ListingType":"FixedPriceItem","Location":"New York, USA","PictureURL":["http://i.ebayimg.com/00/s/ODU0WDc4MA==/z/Fn8AAOSwl9BWK7he/$_1.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":149.95,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"P24DT21H57M1S","Title":"(Factory Unlocked) Apple iPhone 5 AT&T T-Mobile Verizon Black White ","ItemSpecifics":{"NameValueList":[{"Name":"Brand","Value":["Apple"]},{"Name":"MPN","Value":["Select your model using the list"]},{"Name":"Screen Size","Value":["4\""]}]},"Country":"US","AutoPay":true,"ConditionID":3000,"ConditionDisplayName":"Used","QuantityAvailableHint":"MoreThan","QuantityThreshold":10,"ConditionDescription":"Device is fully tested in guaranteed working condition. Acquired recently in a trade in they are in great used condition. May have some minor wear and tear from use but nothing too bad. Estimated 7-8 out of 10 cosmetic condition. We offer a full 30 day money back guarantee on every purchase."},{"ItemID":"262107227833","EndTime":"2015-12-21T19:02:58.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Factory-Unlocked-Apple-iPhone-6-16GB-Gold-Silver-Gray-AT-T-Smartphone-/262107227833?var=","ListingType":"FixedPriceItem","Location":"Houston, Texas","PictureURL":["http://i.ebayimg.com/00/s/MTA1MFgxMzEy/z/vt8AAOSwhcJWM6Il/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/OTAwWDE2MDA=/z/KXUAAOSwwbdWKS6b/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/OTAwWDE2MDA=/z/ChwAAOSwI-BWKS6e/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/OTAwWDE2MDA=/z/jQAAAOSwAYtWKS6h/$_1.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":649.99,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"P1DT55M56S","Title":"Factory Unlocked Apple iPhone 6 - 16GB - Gold, Silver, Gray (AT&T) Smartphone","ItemSpecifics":{"NameValueList":[{"Name":"Brand","Value":["Apple"]},{"Name":"Model","Value":["iPhone 6"]},{"Name":"MPN","Value":["Does Not Apply"]},{"Name":"Network","Value":["AT&T"]},{"Name":"Operating System","Value":["iOS - Apple"]},{"Name":"Storage Capacity","Value":["16GB"]},{"Name":"Style","Value":["Bar"]},{"Name":"Screen Size","Value":["LCD (Color TFT/TFD) Resolution: 750 x 1334 pixels"]},{"Name":"Lock Status","Value":["Factory Unlocked"]},{"Name":"Processor","Value":["Apple A8 64-bit"]}]},"Country":"US","AutoPay":true,"ConditionID":2500,"ConditionDisplayName":"Seller refurbished","ConditionDescription":"The phone is fully tested and 100% functional. The phone has scratches or signs of use."},{"ItemID":"141708646451","EndTime":"2015-12-29T15:01:42.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-6-128GB-AT-T-Smartphone-Space-Gray-Silver-Gold-/141708646451?var=","ListingType":"FixedPriceItem","Location":"Long Island, NY","PictureURL":["http://i.ebayimg.com/00/s/NTU1WDQzNA==/z/ZzIAAOSwEeFVU6Cd/$_1.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":469.88,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"P8DT20H54M40S","Title":"Apple iPhone 6 - 128GB (AT&T) Smartphone - Space Gray -Silver - Gold","ItemSpecifics":{"NameValueList":[{"Name":"Brand","Value":["Apple"]},{"Name":"Model","Value":["iPhone 6"]},{"Name":"MPN","Value":["A1549"]},{"Name":"Network","Value":["AT&T"]},{"Name":"Contract","Value":["Without Contract"]},{"Name":"Operating System","Value":["iOS - Apple"]},{"Name":"Storage Capacity","Value":["128GB"]},{"Name":"Style","Value":["Bar"]},{"Name":"Features","Value":["Siri","3G Data Capable","4G Data Capable","Bluetooth Enabled","Fingerprint Sensor","Global Ready","GPS","Internet Browser","Music Player","Near Field Communication","Speakerphone","Touchscreen","TTY Compatible","Voice-Activated Dialing","Wi-Fi Capable"]},{"Name":"Camera Resolution","Value":["8.0MP"]},{"Name":"Screen Size","Value":["4.7\""]},{"Name":"Lock Status","Value":["Network Locked"]},{"Name":"Processor","Value":["Dual Core"]},{"Name":"RAM","Value":["1GB"]},{"Name":"Unlock Status","Value":["Carrier Locked"]}]},"Country":"US","AutoPay":true,"ConditionID":2500,"ConditionDisplayName":"Seller refurbished","ConditionDescription":"This item is in Excellent Condition - Minor signs of Use (Light Scratching/Scuffing) possible on Housing/Screen. Phone is Fully Functional. Sim Card, Earbuds and Original Box NOT included. Package Contents: Phone, Charging Head, USB Cable. Model # A1549. This item is an AT&T device and will work on the AT&T Network ONLY"},{"ItemID":"131680829344","EndTime":"2015-12-27T07:33:30.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-6S-Plus-64GB-Space-Gray-Factory-Unlocked-Smartphone-/131680829344","ListingType":"FixedPriceItem","Location":"Westerville, Ohio","GalleryURL":"http://thumbs1.ebaystatic.com/pict/1316808293448080_1.jpg","PictureURL":["http://i.ebayimg.com/00/s/MTAwMVg3NDk=/z/cqUAAOSwxN5WUhsq/$_12.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/OTk1WDc0OQ==/z/4kQAAOSwHQ9WUhs5/$_12.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTAwMlg3NDk=/z/4Q8AAOSwcBhWUhtQ/$_12.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/NTYwWDc0OQ==/z/rvQAAOSwnipWUhti/$_12.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":819.99,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"P6DT13H26M28S","Title":"Apple iPhone 6S Plus - 64GB - Space Gray (Factory Unlocked) Smartphone","ItemSpecifics":{"NameValueList":[{"Name":"Model","Value":["6 Plus"]},{"Name":"Color","Value":["Gray"]},{"Name":"Brand","Value":["Apple"]},{"Name":"MPN","Value":["MKW92LL/A"]},{"Name":"Network","Value":["Unlocked"]},{"Name":"Storage Capacity","Value":["64GB"]},{"Name":"Screen Size","Value":["5.5\""]},{"Name":"Camera Resolution","Value":["12.0MP"]}]},"Country":"US","AutoPay":true,"ConditionID":1500,"ConditionDisplayName":"New other (see details)","GlobalShipping":true,"ConditionDescription":"Open box"},{"ItemID":"121839589033","EndTime":"2015-12-20T18:15:01.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-5-16GB-Black-Slate-Verizon-Smartphone-/121839589033","ListingType":"Chinese","Location":"Ramsey, New Jersey","GalleryURL":"http://thumbs2.ebaystatic.com/pict/1218395890338080_1.jpg","PictureURL":["http://i.ebayimg.com/00/s/NjUwWDY1MA==/z/UCoAAOSwnH1WbbWY/$_12.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":1,"ConvertedCurrentPrice":{"Value":105.0,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"PT7M59S","Title":"Apple iPhone 5 - 16GB - Black & Slate (Verizon) Smartphone","ItemSpecifics":{"NameValueList":[{"Name":"Brand","Value":["Apple"]},{"Name":"Network","Value":["Verizon"]},{"Name":"Storage Capacity","Value":["16GB"]},{"Name":"Screen Size","Value":["4\""]},{"Name":"Style","Value":["Bar"]},{"Name":"Camera Resolution","Value":["8.0MP"]}]},"Country":"US","AutoPay":true,"ConditionID":3000,"ConditionDisplayName":"Used"},{"ItemID":"172030855881","EndTime":"2015-12-20T18:39:47.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-5S-16GB-Space-Gray-SPRINT-Smartphone-BRAND-NEW-/172030855881","ListingType":"Chinese","Location":"Macomb, Michigan","GalleryURL":"http://thumbs2.ebaystatic.com/pict/1720308558818080_1.jpg","PictureURL":["http://i.ebayimg.com/00/s/NDQ0WDU5MA==/z/8LkAAOSw9N1VyOG9/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/NTAwWDUwMA==/z/VpUAAOSwjVVVyOHJ/$_1.JPG?set_id=8800005007"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":349.99,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"PT32M45S","Title":"Apple iPhone 5S 16GB - Space Gray SPRINT Smartphone BRAND NEW ","ItemSpecifics":{"NameValueList":[{"Name":"Contract","Value":["Without Contract"]},{"Name":"Operating System","Value":["iOS - Apple"]},{"Name":"Color","Value":["Gray"]},{"Name":"Lock Status","Value":["Network Locked"]},{"Name":"Brand","Value":["Apple"]},{"Name":"MPN","Value":["ME350LL/A"]},{"Name":"Network","Value":["Sprint"]},{"Name":"Storage Capacity","Value":["16GB"]},{"Name":"Screen Size","Value":["4\""]},{"Name":"Camera Resolution","Value":["8.0MP"]}]},"Country":"US","AutoPay":false,"ConditionID":1000,"ConditionDisplayName":"New"},{"ItemID":"272075724557","EndTime":"2015-12-20T18:22:47.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-5s-16GB-Gold-T-Mobile-Smartphone-/272075724557","ListingType":"Chinese","Location":"Long Beach, California","GalleryURL":"http://thumbs2.ebaystatic.com/pict/2720757245578080_1.jpg","PictureURL":["http://i.ebayimg.com/00/s/MTIwOVg5MDc=/z/NFsAAOSwv-NWbaE7/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/MTIwOVg5MDc=/z/ZtEAAOSwfZ1WbaFT/$_1.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":112.0,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"PT15M45S","Title":"Apple iPhone 5s - 16GB - Gold (T-Mobile) Smartphone","ItemSpecifics":{"NameValueList":[{"Name":"Model","Value":["iPhone 5s"]},{"Name":"Color","Value":["Gold"]},{"Name":"Cosmetic condition","Value":["Poor"]},{"Name":"No accessories","Value":["Yes"]},{"Name":"Brand","Value":["Apple"]},{"Name":"MPN","Value":["ME325LL/A"]},{"Name":"Network","Value":["T-Mobile"]},{"Name":"Storage Capacity","Value":["16GB"]},{"Name":"Screen Size","Value":["4\""]},{"Name":"Camera Resolution","Value":["8.0MP"]}]},"Country":"US","AutoPay":false,"ConditionID":3000,"ConditionDisplayName":"Used"},{"ItemID":"291636072458","EndTime":"2015-12-20T18:21:31.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-4s-16GB-White-Unlocked-Smartphone-/291636072458","ListingType":"Chinese","Location":"Sacramento, California","GalleryURL":"http://thumbs3.ebaystatic.com/pict/2916360724588080_1.jpg","PictureURL":["http://i.ebayimg.com/00/s/NzY4WDEwMjQ=/z/Rt4AAOSwN81WDBUt/$_1.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/NzY4WDEwMjQ=/z/SRUAAOSwN81WDBU-/$_1.JPG?set_id=880000500F"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":150.0,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"PT14M29S","Title":"Apple iPhone 4s - 16GB - White (Unlocked) Smartphone","ItemSpecifics":{"NameValueList":[{"Name":"Contract","Value":["Without Contract"]},{"Name":"Operating System","Value":["iOS - Apple"]},{"Name":"Color","Value":["White"]},{"Name":"Cosmetic condition","Value":["Excellent"]},{"Name":"Headphones","Value":["Yes"]},{"Name":"Charger and cable","Value":["Yes"]},{"Name":"Original box","Value":["Yes"]},{"Name":"Brand","Value":["Apple"]},{"Name":"Network","Value":["Unlocked"]},{"Name":"Storage Capacity","Value":["16GB"]},{"Name":"Screen Size","Value":["3.5\""]},{"Name":"Style","Value":["Bar"]},{"Name":"Camera Resolution","Value":["8.0MP"]}]},"Country":"US","AutoPay":false,"ConditionID":3000,"ConditionDisplayName":"Used","GlobalShipping":true},{"ItemID":"401026561427","EndTime":"2016-01-12T18:03:46.000Z","ViewItemURLForNaturalSearch":"http://www.ebay.com/itm/Apple-iPhone-5-16GB-Verizon-Wireless-4G-LTE-iOS-Black-and-White-Smartphone-/401026561427?var=","ListingType":"FixedPriceItem","Location":"Clifton, NJ","PictureURL":["http://i.ebayimg.com/00/s/MTE2N1gxMTY3/z/9yQAAOSweuxWRiWX/$_12.JPG?set_id=880000500F","http://i.ebayimg.com/00/s/NTAwWDUwMA==/z/j4wAAOSwEgVWRiWd/$_1.JPG?set_id=8800005007"],"PrimaryCategoryID":"9355","PrimaryCategoryName":"Cell Phones & Accessories:Cell Phones & Smartphones","BidCount":0,"ConvertedCurrentPrice":{"Value":172.95,"CurrencyID":"USD"},"ListingStatus":"Active","TimeLeft":"P22DT23H56M44S","Title":"Apple iPhone 5 16GB Verizon Wireless 4G LTE iOS Black and White Smartphone","ItemSpecifics":{"NameValueList":[{"Name":"Brand","Value":["Apple"]},{"Name":"Model","Value":["iPhone 5"]},{"Name":"Contract","Value":["Without Contract"]},{"Name":"Operating System","Value":["iOS - Apple"]},{"Name":"Storage Capacity","Value":["16GB"]},{"Name":"Style","Value":["Bar"]},{"Name":"Features","Value":["4G Data Capable","Bluetooth Enabled","Internet Browser","Speakerphone","Touchscreen","Wi-Fi Capable"]},{"Name":"Note","Value":["4G SIM Card Required - NOT included"]},{"Name":"Carrier","Value":["Verizon"]}]},"Country":"US","AutoPay":true,"ConditionID":2500,"ConditionDisplayName":"Seller refurbished","QuantityAvailableHint":"Limited","ConditionDescription":"This is an A Stock item, meaning unit is in excellent cosmetic condition and if there are any blemishes they will be minor."}]}')
  	  ## Request results from the Ebay Finding Api with the nameOfProduct and numberOfEntries as the main parameters
  	  #findingApiUrl = URI.parse(URI.escape("http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=PriceApp-6d57-4fa0-bd01-63c74270c501&GLOBAL-ID=EBAY-US&RESPONSE-DATA-FORMAT=JSON&keywords=#{nameOfProduct}&paginationInput.entriesPerPage=#{numberOfResults}&_=1448672487493"))
  	  #findingApiCall = WelcomeController.SendHttpRequest(findingApiUrl)
  	  ## If call fails, return false
  	  #if findingApiCall == "empty" || findingApiCall == "errorParsing"
  	  #  return false
  	  #end
  	  #findingApiResults = findingApiCall["findItemsByKeywordsResponse"][0]["searchResult"][0]["item"]

  	  #itemIdArray = []

  	  #findingApiResults.each do |result|
  	  #  itemId = result["itemId"][0]
  	  #  itemIdArray.push(itemId)
  	  #end
	
  	  #itemString = ""
  	  #itemIdArray.each_with_index do |itemId, i|
  	  #  itemString += (itemId)
  	  #  if i != (itemIdArray.length - 1)
  	  #    itemString += (",")
  	  #  end
  	  #end
	
  	  ## Request results from the Ebay Shopping Api with the ItemId
  	  #shoppingApiUrl = URI.parse(URI.unescape("http://open.api.ebay.com/shopping?callname=GetMultipleItems&responseencoding=JSON&appid=PriceApp-6d57-4fa0-bd01-63c74270c501&siteid=0&version=661&IncludeSelector=ItemSpecifics&ItemID=#{itemString}"))
  	  #shoppingApiCall = WelcomeController.SendHttpRequest(shoppingApiUrl)
  	  ## If call fails, return false
  	  #if shoppingApiCall == "empty" || shoppingApiCall == "errorParsing"
  	  #  return false
  	  #end
  	  shoppingApiResults = shoppingApiCall["Item"]
	
  	  resultItems = []
	
  	  shoppingApiResults.each do |result|
  	    resultItems.push(ResultItem.new(
  	      1.0/shoppingApiResults.length,
  	      result,
  	      result["ConvertedCurrentPrice"]["Value"]))
  	  end
	
  	  return resultItems
  	end

  	# This function gets the value from a name value pair in an Ebay details hash
  	def self.GetNameValueFromHash( detailsHash, name )
  		
  		nameValueList = detailsHash["ItemSpecifics"]["NameValueList"]

  		value = ""
  		nameFound = false;

  		# TODO: Replace this search with a more efficient one
  		nameValueList.each do |nameValuePair|
  			if nameValuePair["Name"] == name
  				value = nameValuePair["Value"][0]
  				nameFound = true
  				break
  			end
  		end

  		if !nameFound
  			return nil
  		else
  			return value
  		end
  	end
end